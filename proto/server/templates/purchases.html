<div id="loader"></div>

<div class="container blur" ng-app="purchases_app" ng-controller="purchases_controller">

    <div class="row">
        <div class="col-sm-12 col-md-10 col-md-offset-1">
            <div class="btn-toolbar" role="toolbar" aria-label="Filter Toolbar">
                <div class="btn-group dropdown" role="group" aria-label="Year group">
                    <button class="btn btn-timeFilter dropdown-toggle ng-cloak" type="button" data-toggle="dropdown">[[chosenYear]]
                        <span class="caret"></span></button>
                    <ul class="dropdown-menu">
                        <li ng-repeat="year in years"><a href="" ng-click="chooseYear(year)">[[year]]</a></li>
                    </ul>
                </div>
                <div class="btn-group mr-2" role="group" aria-label="Month Group">
                    <button type="button" class="btn btn-timeFilter month-selector active" ng-click="chooseMonth(null)">None</button>
                    <button ng-repeat="month in months" type="button" class="btn btn-timeFilter ng-cloak month-selector" ng-click="chooseMonth(month.value)">[[month.name]]</button>
                </div>
            </div>
        </div>
    </div>

    <hr/>

    <div class="row">

        <div class="col-sm-3">
            <h4 class="text-center" style="color: #8a6d3b">Overview</h4>
            <div class="row text-center">
                <div class="col-sm-12">
                    <ul class="list-group">
                        <li class="list-group-item">
                            <h4>Total Purchases</h4>
                            <h3 id="total-purchases-value" class="ng-cloak">[[total | euro]]</h3>
                        </li>
                        <li class="list-group-item">
                            <h4>Growth</h4>
                            <h3 class="ng-cloak" ng-if="growth != null">[[growth | percentage:2]]</h3>
                            <h3 class="ng-cloak" ng-if="growth == null">No sufficient data</h3>
                        </li>
                    </ul>
                </div>
            </div>
            <a href="purchases_detailed" style="display:block; text-align:center; color: #d09b1c">More details</a>
        </div>

        <div class="col-sm-6">
            <div id="total-purchases"></div>
        </div>

        <div class="col-sm-3">
            <h4 class="text-center" style="color: #8a6d3b">Top 3 Suppliers</h4>
            <div class="row text-center">
                <div class="col-sm-12">
                    <table class="table">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Purchases</th>
                        </tr>
                        </thead>
                        <tbody id="supplier-purchases">
                            <tr class="ng-cloak" ng-repeat="purchase in purchases"><td>[[purchase.EntityName]]</td><td class="currency">[[purchase.TotalValue | euro]]</td></tr>
                            <tr class="ng-cloak" ng-if="purchases.length == 0"><td colspan="2">No Suppliers</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>



</div>
<script src="../javascript/main.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="../javascript/purchases.js"></script>
